#Functions - User

---

## advertiseGame

!!! function "advertiseGame( ```string``` server_ip, ```uint16``` port )"
	Set the rich presence data for an unsecured game server that the user is playing on. This allows friends to be able to view the game info and join your game.

	When you are using Steam authentication system this call is never required, the auth system automatically sets the appropriate rich presence.

	**Returns:** void

	**Note:** This is a legacy function.

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#AdvertiseGame){ .md-button .md-button--store target="_blank" }

## beginAuthSession

!!! function "beginAuthSession( ```PoolByteArray``` tickets, ```int``` ticket_size, ```uint64_t``` steam_id )"
	Authenticate the ticket from the entity Steam ID to be sure it is valid and isn't reused.

	The ticket is created on the entity with [getAuthSessionTicket](/functions/users/#getauthsessionticket) and then needs to be provided over the network for the other end to validate.

	This registers for [validate_auth_ticket_response](/signals/users/#validate_auth_ticket_response) callbacks if the entity goes offline or cancels the ticket. See [EAuthSessionResponse](https://partner.steamgames.com/doc/api/steam_api#EAuthSessionResponse){ target="_blank" } for more information.

	When the multiplayer session terminates you must call [endAuthSession](/functions/users/#endauthsession)

	Trigger a [validate_auth_ticket_response](/signals/users/#validate_auth_ticket_response) callback.

	**Returns:** int

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#BeginAuthSession){ .md-button .md-button--store target="_blank" }

## cancelAuthTicket

!!! function "cancelAuthTicket( ```uint32_t``` auth_ticket )"
	Cancels an auth ticket received from [getAuthSessionTicket](/functions/users/#getauthsessionticket). This should be called when no longer playing with the specified entity.

	**Returns:** void

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#CancelAuthTicket){ .md-button .md-button--store target="_blank" }

## decompressVoice

!!! function "decompressVoice( ```PoolByteArray``` voice, ```uint32``` voice_size, ```uint32``` sample_rate )"
	Decodes the compressed voice data returned by [getVoice](/functions/users/#getvoice).
	
	The output data is raw single-channel 16-bit PCM audio. The decoder supports any sample rate from 11025 to 48000. See [getVoiceOptimalSampleRate](/functions/users/#getvoiceoptimalsamplerate) for more information.

	It is recommended that you start with a 20KiB buffer and then reallocate as necessary.

	See [Steam Voice](https://partner.steamgames.com/doc/features/voice){ target="_blank" } for more information.

	**Returns:** dictionary

	Contains the following keys:

	* uncompressed (PoolByteArray)
	* size (uint32)

	---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#DecompressVoice){ .md-button .md-button--store target="_blank" }

## endAuthSession

!!! function "endAuthSession( ```uint64_t``` steam_id )"
	Ends an auth session that was started with [beginAuthSession](/functions/users/#beginauthsession). This should be called when no longer playing with the specified entity.
	
	**Returns:** void

	---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#EndAuthSession){ .md-button .md-button--store target="_blank" }

## getAuthSessionTicket

!!! function "getAuthSessionTicket( network_identity )"
	Retrieve an authentication ticket to be sent to the entity who wishes to authenticate you.

	After calling this you can send the ticket to the entity where they can then call [beginAuthSession](/functions/users/#beginauthsession) to verify this entities integrity.

	When creating a ticket for use by the [authenticateUserTicket](/functions/users/#authenticateuserticket) Web API, the calling application should wait for the [get_auth_session_ticket_response](/signals/users/#get_auth_session_ticket_response) callback generated by the API call before attempting to use the ticket to ensure that the ticket has been communicated to the server. If this callback does not come in a timely fashion (10 - 20 seconds), then your client is not connected to Steam, and the [authenticateUserTicket](/functions/users/#authenticateuser) call will fail because it can not authenticate the user.

	Triggers a [get_auth_session_ticket_response](/signals/users/#get_auth_session_ticket_response) callback.

	**Returns:** dictionary

	Contains the following keys:

	* id (uint32_t)
	* buffer (PoolByteArray)
	* size (uint32_t)

	**Notes:** As of Steamworks SDK 1.57, you need to pass a network identity that was created with our Networking Tools class.  While this is optional in the SDK, currently it is required in GodotSteam 3.19+ until we make it optional.

	---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#GetAuthSessionTicket){ .md-button .md-button--store target="_blank" }

## getAvailableVoice

!!! function "getAvailableVoice()"
	Checks to see if there is captured audio data available from [getVoice](/functions/users/#getvoice), and gets the size of the data.

	Most applications will only use compressed data and should ignore the other parameters, which exist primarily for backwards compatibility. See [getVoice](/functions/users/#) for further explanation of "uncompressed" data.

	See [Steam Voice](https://partner.steamgames.com/doc/features/voice){ target="_blank" } for more information.
	
	**Returns:** dictionary

	Contains the following keys:

	* result (int)
	* buffer (uint32)

	---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#GetAvailableVoice){ .md-button .md-button--store target="_blank" }

## getDurationControl

!!! function "getDurationControl()"
	Retrieves anti indulgence / duration control for current user / game combination.

	Triggers a [duration_control](/signals/users/#duration_control) call result.
	
	**Returns:** void

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#GetDurationControl){ .md-button .md-button--store target="_blank" }

## getEncryptedAppTicket

!!! function "getEncryptedAppTicket()"
	Retrieve an encrypted ticket.

	This should be called after requesting an encrypted app ticket with [requestEncryptedAppTicket](/functions/users/#requestencryptedappticket) and receiving the [encrypted_app_ticket_response](/signals/users/#encrypted_app_ticket_response) call result.

	You should then pass this encrypted ticket to your secure servers to be decrypted using your secret key using [decryptTicket](/functions/users/#decryptticket)

	**Returns:** dictionary

	Contains the following keys:

	* buffer (PoolByteArray)
	* size (uint32_t)

	**Note:**  If you call this without calling [requestEncryptedAppTicket](/functions/users/#requestencryptedappticket), the call may succeed but you will likely get a stale ticket.

	---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#GetEncryptedAppTicket){ .md-button .md-button--store target="_blank" }

## getGameBadgeLevel

!!! function "getGameBadgeLevel( ```int``` series, ```bool``` foil )"
	Gets the level of the users Steam badge for your game.

	The user can have two different badges for a series; the regular badge (max level 5) and the foil badge (max level 1).
	
	**Returns:** int

	---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#GetGameBadgeLevel){ .md-button .md-button--store target="_blank" }

## getPlayerSteamLevel

!!! function "getPlayerSteamLevel()"
	Gets the Steam level of the user, as shown on their Steam community profile.

	**Returns:** int

	---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#GetPlayerSteamLevel){ .md-button .md-button--store target="_blank" }

## getSteamID

!!! function "getSteamID()"
	Gets the Steam ID (ID64) of the account currently logged into the Steam client. This is commonly called the 'current user', or 'local user'.

	A Steam ID is a unique identifier for a Steam accounts, Steam groups, Lobbies and Chat rooms, and used to differentiate users in all parts of the Steamworks API.

	**Returns:** uint64_t

	---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#GetSteamID){ .md-button .md-button--store target="_blank" }

## getVoice

!!! function "getVoice()"
	Read captured audio data from the microphone buffer.

	The compressed data can be transmitted by your application and decoded back into raw audio data using DecompressVoice on the other side. The compressed data provided is in an arbitrary format and is not meant to be played directly.

	This should be called once per frame, and at worst no more than four times a second to keep the microphone input delay as low as possible. Calling this any less may result in gaps in the returned stream.

	It is recommended that you pass in an 8 kilobytes or larger destination buffer for compressed audio. Static buffers are recommended for performance reasons. However, if you would like to allocate precisely the right amount of space for a buffer before each call you may use [getAvailableVoice](/functions/users/#getavailablevoice) to find out how much data is available to be read.

	See [Steam Voice](https://partner.steamgames.com/doc/features/voice){ target="_blank" } for more information.

	**Returns:** dictionary

	Contains the following keys:

	* result (int)
	* written (uint32)
	* buffer (uint8)

	**Note:**  "Uncompressed" audio is a deprecated feature and should not be used by most applications. It is raw single-channel 16-bit PCM wave data which may have been run through preprocessing filters and/or had silence removed, so the uncompressed audio could have a shorter duration than you expect. There may be no data at all during long periods of silence. Also, fetching uncompressed audio will cause [getVoice](/functions/users/#getvoice) to discard any leftover compressed audio, so you must fetch both types at once. Finally, [getAvailableVoice](/functions/users/#getavailablevoice) is not precisely accurate when the uncompressed size is requested. So if you really need to use uncompressed audio, you should call [getVoice](/functions/users/#getvoice) frequently with two very large (20KiB+) output buffers instead of trying to allocate perfectly-sized buffers. But most applications should ignore all of these details and simply leave the "uncompressed" parameters as NULL/0.

	---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#GetVoice){ .md-button .md-button--store target="_blank" }	

## getVoiceOptimalSampleRate

!!! function "getVoiceOptimalSampleRate()"
	Gets the native sample rate of the Steam voice decoder.

	Using this sample rate for [decompressVoice](/functions/users/#) will perform the least CPU processing. However, the final audio quality will depend on how well the audio device (and/or your application's audio output SDK) deals with lower sample rates. You may find that you get the best audio output quality when you ignore this function and use the native sample rate of your audio output device, which is usually 48000 or 44100.

	See [Steam Voice](https://partner.steamgames.com/doc/features/voice){ target="_blank" } for more information.

	**Returns:** int

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#GetVoiceOptimalSampleRate){ .md-button .md-button--store target="_blank" }

## initiateGameConnection

!!! function "initiateGameConnection( ```uint64_t``` server_id, ```uint32``` server_ip, ```uint16``` server_port, ```bool``` secure )"
	This starts the state machine for authenticating the game client with the game server.

	It is the client portion of a three-way handshake between the client, the game server, and the steam servers.

	**Returns:** dictionary

	Contains the following keys:

	* auth_blob (PoolByteArray)
	* server_id (uint64_t)
	* server_ip (uint32)
	* server_port (uint16)

	**Note:**  When you're done with the connection you must call [terminateGameConnection](/functions/users/#terminategameconnection)

	**Note:**  This is part of the old user authentication API and should not be mixed with the new API.

	---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#InitiateGameConnection){ .md-button .md-button--store target="_blank" }

## isBehindNAT

!!! function "isBehindNAT()"
	Checks if the current user looks like they are behind a NAT device.

	This is only valid if the user is connected to the Steam servers and may not catch all forms of NAT.

	**Returns:** bool

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#BIsBehindNAT){ .md-button .md-button--store target="_blank" }

## isPhoneIdentifying

!!! function "isPhoneIdentifying()"
	Checks whether the user's phone number is used to uniquely identify them.

	**Returns:** bool

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#BIsPhoneIdentifying){ .md-button .md-button--store target="_blank" }

## isPhoneRequiringVerification

!!! function "isPhoneRequiringVerification()"
	Checks whether the current user's phone number is awaiting (re)verification.

	**Returns:** bool

	---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#BIsPhoneRequiringVerification){ .md-button .md-button--store target="_blank" }

## isPhoneVerified

!!! function "isPhoneVerified()"
	Checks whether the current user has verified their phone number.

	See the [Steam Guard Mobile Authenticator](https://support.steampowered.com/kb_article.php?ref=8625-wrah-9030){ target="_blank" } page on the customer facing Steam Support site for more information.
	
	**Returns:** bool

	---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#BIsPhoneVerified){ .md-button .md-button--store target="_blank" }

## isTwoFactorEnabled

!!! function "isTwoFactorEnabled()"
	Checks whether the current user has Steam Guard two factor authentication enabled on their account.

	See the [Steam Guard Mobile Authenticator](https://support.steampowered.com/kb_article.php?ref=8625-wrah-9030){ target="_blank" } page on the customer facing Steam Support site for more information.
	
	**Returns:** bool

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#BIsTwoFactorEnabled){ .md-button .md-button--store target="_blank" }

## loggedOn

!!! function "loggedOn()"
	Checks if the current user's Steam client is connected to the Steam servers.

	If it's not then no real-time services provided by the Steamworks API will be enabled. The Steam client will automatically be trying to recreate the connection as often as possible. When the connection is restored a [steam_server_connected](/signals/users/#steam_server_connected) callback will be posted.

	You usually don't need to check for this yourself. All of the API calls that rely on this will check internally. Forcefully disabling stuff when the player loses access is usually not a very good experience for the player and you could be preventing them from accessing APIs that do not need a live connection to Steam.

	**Returns:** bool

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#BLoggedOn){ .md-button .md-button--store target="_blank" }

## requestEncryptedAppTicket

!!! function "requestEncryptedAppTicket( ```string``` secret )"
	Requests an application ticket encrypted with the secret "encrypted app ticket key".

	The encryption key can be obtained from the [Encrypted App Ticket Key](https://partner.steamgames.com/apps/sdkauth/){ target="_blank" } page on the App Admin for your app.

	There can only be one [encrypted_app_ticket_response](/signals/users/#encrypted_app_ticket_response) pending, and this call is subject to a 60 second rate limit.

	After receiving the response you should call [getEncryptedAppTicket](/functions/users/#getencryptedappticket) to get the ticket data, and then you need to send it to a secure server to be decrypted with the [SteamEncryptedAppTicket](https://partner.steamgames.com/doc/api/SteamEncryptedAppTicket){ target="_blank" } functions.

	Triggers a [encrypted_app_ticket_response](/signals/users/#encrypted_app_ticket_response) call result.

	**Returns:** void

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#RequestEncryptedAppTicket){ .md-button .md-button--store target="_blank" }

## requestStoreAuthURL

!!! function "requestStoreAuthURL( ```string``` redirect )"
	Requests a URL which authenticates an in-game browser for store check-out, and then redirects to the specified URL.

	As long as the in-game browser accepts and handles session cookies, Steam microtransaction checkout pages will automatically recognize the user instead of presenting a login page.

	Triggers a [store_auth_url_response](/signals/users/#store_auth_url_response) call result.
	
	**Returns:** void

	**Note:** The URL has a very short lifetime to prevent history-snooping attacks, so you should only call this API when you are about to launch the browser, or else immediately navigate to the result URL using a hidden browser window.

	**Note:** The resulting authorization cookie has an expiration time of one day, so it would be a good idea to request and visit a new auth URL every 12 hours.

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#RequestStoreAuthURL){ .md-button .md-button--store target="_blank" }

## setDurationControlOnlineState

!!! function "setDurationControlOnlineState( ```int``` new_state )"
	Allows the game to specify the offline/online gameplay state for Steam China duration control.

	**Returns:** bool

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#BSetDurationControlOnlineState){ .md-button .md-button--store target="_blank" }

## startVoiceRecording

!!! function "startVoiceRecording()"
	Starts voice recording.

	Once started, use [getAvailableVoice](/functions/users/#getavailablevoice) and [getVoice](/functions/users/#getvoice) to get the data, and then call [stopVoiceRecording](/functions/users/#stopvoicerecording) when the user has released their push-to-talk hotkey or the game session has completed.

	See [Steam Voice](https://partner.steamgames.com/doc/features/voice){ target="_blank" } for more information.

	**Returns:** void

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#StartVoiceRecording){ .md-button .md-button--store target="_blank" }

## stopVoiceRecording

!!! function "stopVoiceRecording()"
	Stops voice recording.

	Because people often release push-to-talk keys early, the system will keep recording for a little bit after this function is called. As such, [getVoice](/functions/users/#getvoice) should continue to be called until it returns 2, only then will voice recording be stopped.

	**Returns:** void

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#StopVoiceRecording){ .md-button .md-button--store target="_blank" }

## terminateGameConnection

!!! function "terminateGameConnection( ```uint32``` server_ip, ```uint32``` server_port )"
	Notify the game server that we are disconnecting.

	This needs to occur when the game client leaves the specified game server, needs to match with the [initiateGameConnection](/functions/users/#initiategameconnection) call.

	**Returns:** void

	**Note:**  This is part of the old user authentication API and should not be mixed with the new API.

	---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#TerminateGameConnection){ .md-button .md-button--store target="_blank" }

## userHasLicenseForApp

!!! function "userHasLicenseForApp( ```uint64_t``` steam_id, ```uint32_t``` app_id )"
	Checks if the user owns a specific piece of Downloadable Content (DLC).

	This can only be called after sending the users auth ticket to [beginAuthSession](/functions/users/#beginauthsession).

	**Returns:** int

    ---
    [:fontawesome-brands-steam: Read more in the official Steamworks SDK documentation](https://partner.steamgames.com/doc/api/ISteamUser#UserHasLicenseForApp){ .md-button .md-button--store target="_blank" }
